"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/register/route";
exports.ids = ["app/api/auth/register/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Dawit_Desktop_assignmet_platform_app_api_auth_register_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/register/route.ts */ \"(rsc)/./app/api/auth/register/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/register/route\",\n        pathname: \"/api/auth/register\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/register/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Dawit\\\\Desktop\\\\assignmet platform\\\\app\\\\api\\\\auth\\\\register\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Dawit_Desktop_assignmet_platform_app_api_auth_register_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/register/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcmVnaXN0ZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNEYXdpdCU1Q0Rlc2t0b3AlNUNhc3NpZ25tZXQlMjBwbGF0Zm9ybSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDRGF3aXQlNUNEZXNrdG9wJTVDYXNzaWdubWV0JTIwcGxhdGZvcm0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUM7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3NpZ25tZW50LXBsYXRmb3JtLz8wYzBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXERhd2l0XFxcXERlc2t0b3BcXFxcYXNzaWdubWV0IHBsYXRmb3JtXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxyZWdpc3RlclxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9yZWdpc3Rlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvcmVnaXN0ZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvcmVnaXN0ZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxEYXdpdFxcXFxEZXNrdG9wXFxcXGFzc2lnbm1ldCBwbGF0Zm9ybVxcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccmVnaXN0ZXJcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9yZWdpc3Rlci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/register/route.ts":
/*!****************************************!*\
  !*** ./app/api/auth/register/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        console.log(\"Registration request received\");\n        let body = {};\n        let paymentScreenshot = null;\n        // Check content type to determine how to parse the request\n        const contentType = request.headers.get(\"content-type\") || \"\";\n        if (contentType.includes(\"multipart/form-data\")) {\n            // Handle FormData (with file upload)\n            const formData = await request.formData();\n            // Extract all form fields\n            body = {\n                email: formData.get(\"email\"),\n                password: formData.get(\"password\"),\n                name: formData.get(\"name\"),\n                phone: formData.get(\"phone\"),\n                telegramUsername: formData.get(\"telegramUsername\"),\n                whatsappNumber: formData.get(\"whatsappNumber\"),\n                departmentId: formData.get(\"departmentId\"),\n                paymentMethod: formData.get(\"paymentMethod\"),\n                userType: formData.get(\"userType\") || \"user\"\n            };\n            paymentScreenshot = formData.get(\"paymentScreenshot\");\n            console.log(\"FormData parsed:\", {\n                ...body,\n                hasScreenshot: !!paymentScreenshot\n            });\n        } else {\n            // Handle JSON data\n            body = await request.json();\n            console.log(\"JSON data parsed:\", body);\n        }\n        const { email, password, name, phone, telegramUsername, whatsappNumber, departmentId, userType, paymentMethod } = body;\n        console.log(\"Processing registration for:\", email, \"Type:\", userType);\n        // Validate required fields\n        if (!email || !password) {\n            console.log(\"Missing email or password\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Email and password are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Admin registration\n        if (userType === \"admin\") {\n            console.log(\"Processing admin registration\");\n            const existingAdmin = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.admin.findUnique({\n                where: {\n                    email\n                }\n            });\n            if (existingAdmin) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Admin with this email already exists\"\n                }, {\n                    status: 400\n                });\n            }\n            const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 12);\n            const admin = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.admin.create({\n                data: {\n                    email,\n                    password: hashedPassword,\n                    name: name || \"Admin\"\n                }\n            });\n            console.log(\"Admin created successfully:\", admin.id);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"Admin registered successfully\",\n                admin: {\n                    id: admin.id,\n                    email: admin.email,\n                    name: admin.name\n                }\n            });\n        }\n        // User registration\n        console.log(\"Processing user registration\");\n        if (!name || !phone || !departmentId) {\n            console.log(\"Missing required user fields\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Name, phone, and department are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate contact methods\n        const hasValidTelegram = telegramUsername && telegramUsername.length >= 3;\n        const hasValidWhatsApp = whatsappNumber && whatsappNumber.length >= 8;\n        if (!hasValidTelegram && !hasValidWhatsApp) {\n            console.log(\"Invalid contact methods\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Either Telegram username (min 3 characters) or WhatsApp number (min 8 digits) is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if user already exists\n        const existingUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            console.log(\"User already exists\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User with this email already exists\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify department exists\n        const department = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.department.findUnique({\n            where: {\n                id: departmentId\n            }\n        });\n        if (!department) {\n            console.log(\"Invalid department\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid department selected\"\n            }, {\n                status: 400\n            });\n        }\n        // Hash password\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 12);\n        let screenshotPath = null;\n        // Handle file upload if present\n        if (paymentScreenshot && paymentScreenshot.size > 0) {\n            console.log(\"Processing payment screenshot upload, file size:\", paymentScreenshot.size);\n            try {\n                // Validate file type\n                if (!paymentScreenshot.type.startsWith(\"image/\")) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: \"Payment screenshot must be an image file\"\n                    }, {\n                        status: 400\n                    });\n                }\n                // Validate file size (5MB limit)\n                if (paymentScreenshot.size > 5 * 1024 * 1024) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: \"Payment screenshot must be less than 5MB\"\n                    }, {\n                        status: 400\n                    });\n                }\n                const bytes = await paymentScreenshot.arrayBuffer();\n                const buffer = Buffer.from(bytes);\n                // Create unique filename with proper extension\n                const fileExtension = paymentScreenshot.name.split(\".\").pop() || \"jpg\";\n                const filename = `payment_${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExtension}`;\n                const uploadsDir = (0,path__WEBPACK_IMPORTED_MODULE_4__.join)(process.cwd(), \"public\", \"uploads\");\n                const filePath = (0,path__WEBPACK_IMPORTED_MODULE_4__.join)(uploadsDir, filename);\n                // Ensure uploads directory exists\n                try {\n                    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir)(uploadsDir, {\n                        recursive: true\n                    });\n                    console.log(\"Uploads directory ensured\");\n                } catch (mkdirError) {\n                    console.log(\"Uploads directory already exists or created\");\n                }\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile)(filePath, buffer);\n                screenshotPath = `/uploads/${filename}`;\n                console.log(\"Screenshot saved successfully:\", screenshotPath);\n            } catch (fileError) {\n                console.error(\"File upload error:\", fileError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Failed to upload payment screenshot. Please try again.\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // Create user\n        console.log(\"Creating user in database\");\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.create({\n            data: {\n                email,\n                password: hashedPassword,\n                name,\n                phone,\n                telegramUsername: telegramUsername || null,\n                whatsappNumber: whatsappNumber || null,\n                departmentId,\n                isApproved: false,\n                registrationFee: !!screenshotPath,\n                paymentMethod: paymentMethod || null,\n                paymentScreenshot: screenshotPath,\n                paymentApproved: false\n            },\n            include: {\n                department: true\n            }\n        });\n        console.log(\"User created successfully:\", user.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: screenshotPath ? \"Registration successful! Your payment screenshot has been uploaded. Please wait for admin approval.\" : \"Registration successful! Please complete your payment and upload the screenshot.\",\n            user: {\n                id: user.id,\n                email: user.email,\n                name: user.name,\n                department: user.department?.name,\n                isApproved: user.isApproved,\n                paymentApproved: user.paymentApproved,\n                registrationFee: user.registrationFee\n            }\n        });\n    } catch (error) {\n        console.error(\"Registration error:\", error);\n        // More specific error handling\n        if (error instanceof Error) {\n            if (error.message.includes(\"Unique constraint\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"User with this email already exists\"\n                }, {\n                    status: 400\n                });\n            }\n            if (error.message.includes(\"Foreign key constraint\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Invalid department selected\"\n                }, {\n                    status: 400\n                });\n            }\n            if (error.message.includes(\"ENOENT\") || error.message.includes(\"permission\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"File upload failed. Please try again.\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Registration failed. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvcmVnaXN0ZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQzFCO0FBQ1E7QUFDUztBQUNuQjtBQUVwQixlQUFlTSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLElBQUlDLE9BQVksQ0FBQztRQUNqQixJQUFJQyxvQkFBaUM7UUFFckMsMkRBQTJEO1FBQzNELE1BQU1DLGNBQWNMLFFBQVFNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQjtRQUUzRCxJQUFJRixZQUFZRyxRQUFRLENBQUMsd0JBQXdCO1lBQy9DLHFDQUFxQztZQUNyQyxNQUFNQyxXQUFXLE1BQU1ULFFBQVFTLFFBQVE7WUFFdkMsMEJBQTBCO1lBQzFCTixPQUFPO2dCQUNMTyxPQUFPRCxTQUFTRixHQUFHLENBQUM7Z0JBQ3BCSSxVQUFVRixTQUFTRixHQUFHLENBQUM7Z0JBQ3ZCSyxNQUFNSCxTQUFTRixHQUFHLENBQUM7Z0JBQ25CTSxPQUFPSixTQUFTRixHQUFHLENBQUM7Z0JBQ3BCTyxrQkFBa0JMLFNBQVNGLEdBQUcsQ0FBQztnQkFDL0JRLGdCQUFnQk4sU0FBU0YsR0FBRyxDQUFDO2dCQUM3QlMsY0FBY1AsU0FBU0YsR0FBRyxDQUFDO2dCQUMzQlUsZUFBZVIsU0FBU0YsR0FBRyxDQUFDO2dCQUM1QlcsVUFBVVQsU0FBU0YsR0FBRyxDQUFDLGVBQXlCO1lBQ2xEO1lBRUFILG9CQUFvQkssU0FBU0YsR0FBRyxDQUFDO1lBQ2pDTixRQUFRQyxHQUFHLENBQUMsb0JBQW9CO2dCQUFFLEdBQUdDLElBQUk7Z0JBQUVnQixlQUFlLENBQUMsQ0FBQ2Y7WUFBa0I7UUFDaEYsT0FBTztZQUNMLG1CQUFtQjtZQUNuQkQsT0FBTyxNQUFNSCxRQUFRb0IsSUFBSTtZQUN6Qm5CLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJDO1FBQ25DO1FBRUEsTUFBTSxFQUNKTyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsSUFBSSxFQUNKQyxLQUFLLEVBQ0xDLGdCQUFnQixFQUNoQkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1pFLFFBQVEsRUFDUkQsYUFBYSxFQUNkLEdBQUdkO1FBRUpGLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NRLE9BQU8sU0FBU1E7UUFFNUQsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ1IsU0FBUyxDQUFDQyxVQUFVO1lBQ3ZCVixRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPVCxrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBa0MsR0FDM0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHFCQUFxQjtRQUNyQixJQUFJSixhQUFhLFNBQVM7WUFDeEJqQixRQUFRQyxHQUFHLENBQUM7WUFFWixNQUFNcUIsZ0JBQWdCLE1BQU01QiwrQ0FBTUEsQ0FBQzZCLEtBQUssQ0FBQ0MsVUFBVSxDQUFDO2dCQUNsREMsT0FBTztvQkFBRWhCO2dCQUFNO1lBQ2pCO1lBRUEsSUFBSWEsZUFBZTtnQkFDakIsT0FBTzlCLGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBdUMsR0FDaEQ7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxNQUFNSyxpQkFBaUIsTUFBTWpDLG9EQUFXLENBQUNpQixVQUFVO1lBRW5ELE1BQU1hLFFBQVEsTUFBTTdCLCtDQUFNQSxDQUFDNkIsS0FBSyxDQUFDSyxNQUFNLENBQUM7Z0JBQ3RDQyxNQUFNO29CQUNKcEI7b0JBQ0FDLFVBQVVnQjtvQkFDVmYsTUFBTUEsUUFBUTtnQkFDaEI7WUFDRjtZQUVBWCxRQUFRQyxHQUFHLENBQUMsK0JBQStCc0IsTUFBTU8sRUFBRTtZQUNuRCxPQUFPdEMsa0ZBQVlBLENBQUMyQixJQUFJLENBQUM7Z0JBQ3ZCWSxTQUFTO2dCQUNUUixPQUFPO29CQUNMTyxJQUFJUCxNQUFNTyxFQUFFO29CQUNackIsT0FBT2MsTUFBTWQsS0FBSztvQkFDbEJFLE1BQU1ZLE1BQU1aLElBQUk7Z0JBQ2xCO1lBQ0Y7UUFDRjtRQUVBLG9CQUFvQjtRQUNwQlgsUUFBUUMsR0FBRyxDQUFDO1FBRVosSUFBSSxDQUFDVSxRQUFRLENBQUNDLFNBQVMsQ0FBQ0csY0FBYztZQUNwQ2YsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT1Qsa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTJDLEdBQ3BEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTVcsbUJBQW1CbkIsb0JBQW9CQSxpQkFBaUJvQixNQUFNLElBQUk7UUFDeEUsTUFBTUMsbUJBQW1CcEIsa0JBQWtCQSxlQUFlbUIsTUFBTSxJQUFJO1FBRXBFLElBQUksQ0FBQ0Qsb0JBQW9CLENBQUNFLGtCQUFrQjtZQUMxQ2xDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9ULGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE0RixHQUNyRztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsK0JBQStCO1FBQy9CLE1BQU1jLGVBQWUsTUFBTXpDLCtDQUFNQSxDQUFDMEMsSUFBSSxDQUFDWixVQUFVLENBQUM7WUFDaERDLE9BQU87Z0JBQUVoQjtZQUFNO1FBQ2pCO1FBRUEsSUFBSTBCLGNBQWM7WUFDaEJuQyxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPVCxrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBc0MsR0FDL0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNZ0IsYUFBYSxNQUFNM0MsK0NBQU1BLENBQUMyQyxVQUFVLENBQUNiLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRUssSUFBSWY7WUFBYTtRQUM1QjtRQUVBLElBQUksQ0FBQ3NCLFlBQVk7WUFDZnJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9ULGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE4QixHQUN2QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsZ0JBQWdCO1FBQ2hCLE1BQU1LLGlCQUFpQixNQUFNakMsb0RBQVcsQ0FBQ2lCLFVBQVU7UUFFbkQsSUFBSTRCLGlCQUFpQjtRQUVyQixnQ0FBZ0M7UUFDaEMsSUFBSW5DLHFCQUFxQkEsa0JBQWtCb0MsSUFBSSxHQUFHLEdBQUc7WUFDbkR2QyxRQUFRQyxHQUFHLENBQUMsb0RBQW9ERSxrQkFBa0JvQyxJQUFJO1lBRXRGLElBQUk7Z0JBQ0YscUJBQXFCO2dCQUNyQixJQUFJLENBQUNwQyxrQkFBa0JxQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxXQUFXO29CQUNoRCxPQUFPakQsa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO3dCQUFFQyxPQUFPO29CQUEyQyxHQUNwRDt3QkFBRUMsUUFBUTtvQkFBSTtnQkFFbEI7Z0JBRUEsaUNBQWlDO2dCQUNqQyxJQUFJbEIsa0JBQWtCb0MsSUFBSSxHQUFHLElBQUksT0FBTyxNQUFNO29CQUM1QyxPQUFPL0Msa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO3dCQUFFQyxPQUFPO29CQUEyQyxHQUNwRDt3QkFBRUMsUUFBUTtvQkFBSTtnQkFFbEI7Z0JBRUEsTUFBTXFCLFFBQVEsTUFBTXZDLGtCQUFrQndDLFdBQVc7Z0JBQ2pELE1BQU1DLFNBQVNDLE9BQU9DLElBQUksQ0FBQ0o7Z0JBRTNCLCtDQUErQztnQkFDL0MsTUFBTUssZ0JBQWdCNUMsa0JBQWtCUSxJQUFJLENBQUNxQyxLQUFLLENBQUMsS0FBS0MsR0FBRyxNQUFNO2dCQUNqRSxNQUFNQyxXQUFXLENBQUMsUUFBUSxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUVULGNBQWMsQ0FBQztnQkFDcEcsTUFBTVUsYUFBYTVELDBDQUFJQSxDQUFDNkQsUUFBUUMsR0FBRyxJQUFJLFVBQVU7Z0JBQ2pELE1BQU1DLFdBQVcvRCwwQ0FBSUEsQ0FBQzRELFlBQVlQO2dCQUVsQyxrQ0FBa0M7Z0JBQ2xDLElBQUk7b0JBQ0YsTUFBTXRELGtEQUFLQSxDQUFDNkQsWUFBWTt3QkFBRUksV0FBVztvQkFBSztvQkFDMUM3RCxRQUFRQyxHQUFHLENBQUM7Z0JBQ2QsRUFBRSxPQUFPNkQsWUFBWTtvQkFDbkI5RCxRQUFRQyxHQUFHLENBQUM7Z0JBQ2Q7Z0JBRUEsTUFBTU4sc0RBQVNBLENBQUNpRSxVQUFVaEI7Z0JBQzFCTixpQkFBaUIsQ0FBQyxTQUFTLEVBQUVZLFNBQVMsQ0FBQztnQkFDdkNsRCxRQUFRQyxHQUFHLENBQUMsa0NBQWtDcUM7WUFDaEQsRUFBRSxPQUFPeUIsV0FBVztnQkFDbEIvRCxRQUFRb0IsS0FBSyxDQUFDLHNCQUFzQjJDO2dCQUNwQyxPQUFPdkUsa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO29CQUFFQyxPQUFPO2dCQUF5RCxHQUNsRTtvQkFBRUMsUUFBUTtnQkFBSTtZQUVsQjtRQUNGO1FBRUEsY0FBYztRQUNkckIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTW1DLE9BQU8sTUFBTTFDLCtDQUFNQSxDQUFDMEMsSUFBSSxDQUFDUixNQUFNLENBQUM7WUFDcENDLE1BQU07Z0JBQ0pwQjtnQkFDQUMsVUFBVWdCO2dCQUNWZjtnQkFDQUM7Z0JBQ0FDLGtCQUFrQkEsb0JBQW9CO2dCQUN0Q0MsZ0JBQWdCQSxrQkFBa0I7Z0JBQ2xDQztnQkFDQWlELFlBQVk7Z0JBQ1pDLGlCQUFpQixDQUFDLENBQUMzQjtnQkFDbkJ0QixlQUFlQSxpQkFBaUI7Z0JBQ2hDYixtQkFBbUJtQztnQkFDbkI0QixpQkFBaUI7WUFDbkI7WUFDQUMsU0FBUztnQkFDUDlCLFlBQVk7WUFDZDtRQUNGO1FBRUFyQyxRQUFRQyxHQUFHLENBQUMsOEJBQThCbUMsS0FBS04sRUFBRTtRQUVqRCxPQUFPdEMsa0ZBQVlBLENBQUMyQixJQUFJLENBQUM7WUFDdkJZLFNBQVNPLGlCQUNMLHdHQUNBO1lBQ0pGLE1BQU07Z0JBQ0pOLElBQUlNLEtBQUtOLEVBQUU7Z0JBQ1hyQixPQUFPMkIsS0FBSzNCLEtBQUs7Z0JBQ2pCRSxNQUFNeUIsS0FBS3pCLElBQUk7Z0JBQ2YwQixZQUFZRCxLQUFLQyxVQUFVLEVBQUUxQjtnQkFDN0JxRCxZQUFZNUIsS0FBSzRCLFVBQVU7Z0JBQzNCRSxpQkFBaUI5QixLQUFLOEIsZUFBZTtnQkFDckNELGlCQUFpQjdCLEtBQUs2QixlQUFlO1lBQ3ZDO1FBQ0Y7SUFFRixFQUFFLE9BQU83QyxPQUFPO1FBQ2RwQixRQUFRb0IsS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsK0JBQStCO1FBQy9CLElBQUlBLGlCQUFpQmdELE9BQU87WUFDMUIsSUFBSWhELE1BQU1XLE9BQU8sQ0FBQ3hCLFFBQVEsQ0FBQyxzQkFBc0I7Z0JBQy9DLE9BQU9mLGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBc0MsR0FDL0M7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxJQUFJRCxNQUFNVyxPQUFPLENBQUN4QixRQUFRLENBQUMsMkJBQTJCO2dCQUNwRCxPQUFPZixrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQThCLEdBQ3ZDO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1lBRUEsSUFBSUQsTUFBTVcsT0FBTyxDQUFDeEIsUUFBUSxDQUFDLGFBQWFhLE1BQU1XLE9BQU8sQ0FBQ3hCLFFBQVEsQ0FBQyxlQUFlO2dCQUM1RSxPQUFPZixrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQXdDLEdBQ2pEO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0Y7UUFFQSxPQUFPN0Isa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBeUMsR0FDbEQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3NpZ25tZW50LXBsYXRmb3JtLy4vYXBwL2FwaS9hdXRoL3JlZ2lzdGVyL3JvdXRlLnRzPzRhOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXHJcbmltcG9ydCB7IHdyaXRlRmlsZSwgbWtkaXIgfSBmcm9tICdmcy9wcm9taXNlcydcclxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIHJlcXVlc3QgcmVjZWl2ZWQnKVxyXG4gICAgXHJcbiAgICBsZXQgYm9keTogYW55ID0ge31cclxuICAgIGxldCBwYXltZW50U2NyZWVuc2hvdDogRmlsZSB8IG51bGwgPSBudWxsXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGNvbnRlbnQgdHlwZSB0byBkZXRlcm1pbmUgaG93IHRvIHBhcnNlIHRoZSByZXF1ZXN0XHJcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpIHx8ICcnXHJcbiAgICBcclxuICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpKSB7XHJcbiAgICAgIC8vIEhhbmRsZSBGb3JtRGF0YSAod2l0aCBmaWxlIHVwbG9hZClcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcclxuICAgICAgXHJcbiAgICAgIC8vIEV4dHJhY3QgYWxsIGZvcm0gZmllbGRzXHJcbiAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgZW1haWw6IGZvcm1EYXRhLmdldCgnZW1haWwnKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGZvcm1EYXRhLmdldCgncGFzc3dvcmQnKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgbmFtZTogZm9ybURhdGEuZ2V0KCduYW1lJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHBob25lOiBmb3JtRGF0YS5nZXQoJ3Bob25lJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHRlbGVncmFtVXNlcm5hbWU6IGZvcm1EYXRhLmdldCgndGVsZWdyYW1Vc2VybmFtZScpIGFzIHN0cmluZyxcclxuICAgICAgICB3aGF0c2FwcE51bWJlcjogZm9ybURhdGEuZ2V0KCd3aGF0c2FwcE51bWJlcicpIGFzIHN0cmluZyxcclxuICAgICAgICBkZXBhcnRtZW50SWQ6IGZvcm1EYXRhLmdldCgnZGVwYXJ0bWVudElkJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IGZvcm1EYXRhLmdldCgncGF5bWVudE1ldGhvZCcpIGFzIHN0cmluZyxcclxuICAgICAgICB1c2VyVHlwZTogZm9ybURhdGEuZ2V0KCd1c2VyVHlwZScpIGFzIHN0cmluZyB8fCAndXNlcidcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcGF5bWVudFNjcmVlbnNob3QgPSBmb3JtRGF0YS5nZXQoJ3BheW1lbnRTY3JlZW5zaG90JykgYXMgRmlsZSB8IG51bGxcclxuICAgICAgY29uc29sZS5sb2coJ0Zvcm1EYXRhIHBhcnNlZDonLCB7IC4uLmJvZHksIGhhc1NjcmVlbnNob3Q6ICEhcGF5bWVudFNjcmVlbnNob3QgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEhhbmRsZSBKU09OIGRhdGFcclxuICAgICAgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdKU09OIGRhdGEgcGFyc2VkOicsIGJvZHkpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgXHJcbiAgICAgIGVtYWlsLCBcclxuICAgICAgcGFzc3dvcmQsIFxyXG4gICAgICBuYW1lLCBcclxuICAgICAgcGhvbmUsIFxyXG4gICAgICB0ZWxlZ3JhbVVzZXJuYW1lLCBcclxuICAgICAgd2hhdHNhcHBOdW1iZXIsIFxyXG4gICAgICBkZXBhcnRtZW50SWQsIFxyXG4gICAgICB1c2VyVHlwZSxcclxuICAgICAgcGF5bWVudE1ldGhvZFxyXG4gICAgfSA9IGJvZHlcclxuXHJcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyByZWdpc3RyYXRpb24gZm9yOicsIGVtYWlsLCAnVHlwZTonLCB1c2VyVHlwZSlcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNaXNzaW5nIGVtYWlsIG9yIHBhc3N3b3JkJylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRtaW4gcmVnaXN0cmF0aW9uXHJcbiAgICBpZiAodXNlclR5cGUgPT09ICdhZG1pbicpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgYWRtaW4gcmVnaXN0cmF0aW9uJylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWRtaW4gPSBhd2FpdCBwcmlzbWEuYWRtaW4uZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWwgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nQWRtaW4pIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnQWRtaW4gd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMilcclxuXHJcbiAgICAgIGNvbnN0IGFkbWluID0gYXdhaXQgcHJpc21hLmFkbWluLmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgICBuYW1lOiBuYW1lIHx8ICdBZG1pbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQWRtaW4gY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgYWRtaW4uaWQpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0FkbWluIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBhZG1pbjoge1xyXG4gICAgICAgICAgaWQ6IGFkbWluLmlkLFxyXG4gICAgICAgICAgZW1haWw6IGFkbWluLmVtYWlsLFxyXG4gICAgICAgICAgbmFtZTogYWRtaW4ubmFtZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0gXHJcbiAgICBcclxuICAgIC8vIFVzZXIgcmVnaXN0cmF0aW9uXHJcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyB1c2VyIHJlZ2lzdHJhdGlvbicpXHJcbiAgICBcclxuICAgIGlmICghbmFtZSB8fCAhcGhvbmUgfHwgIWRlcGFydG1lbnRJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTWlzc2luZyByZXF1aXJlZCB1c2VyIGZpZWxkcycpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTmFtZSwgcGhvbmUsIGFuZCBkZXBhcnRtZW50IGFyZSByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgbWV0aG9kc1xyXG4gICAgY29uc3QgaGFzVmFsaWRUZWxlZ3JhbSA9IHRlbGVncmFtVXNlcm5hbWUgJiYgdGVsZWdyYW1Vc2VybmFtZS5sZW5ndGggPj0gM1xyXG4gICAgY29uc3QgaGFzVmFsaWRXaGF0c0FwcCA9IHdoYXRzYXBwTnVtYmVyICYmIHdoYXRzYXBwTnVtYmVyLmxlbmd0aCA+PSA4XHJcbiAgICBcclxuICAgIGlmICghaGFzVmFsaWRUZWxlZ3JhbSAmJiAhaGFzVmFsaWRXaGF0c0FwcCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBjb250YWN0IG1ldGhvZHMnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0VpdGhlciBUZWxlZ3JhbSB1c2VybmFtZSAobWluIDMgY2hhcmFjdGVycykgb3IgV2hhdHNBcHAgbnVtYmVyIChtaW4gOCBkaWdpdHMpIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlciBhbHJlYWR5IGV4aXN0cycpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgZGVwYXJ0bWVudCBleGlzdHNcclxuICAgIGNvbnN0IGRlcGFydG1lbnQgPSBhd2FpdCBwcmlzbWEuZGVwYXJ0bWVudC5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlcGFydG1lbnRJZCB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghZGVwYXJ0bWVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBkZXBhcnRtZW50JylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGRlcGFydG1lbnQgc2VsZWN0ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYXNoIHBhc3N3b3JkXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMilcclxuXHJcbiAgICBsZXQgc2NyZWVuc2hvdFBhdGggPSBudWxsXHJcbiAgICBcclxuICAgIC8vIEhhbmRsZSBmaWxlIHVwbG9hZCBpZiBwcmVzZW50XHJcbiAgICBpZiAocGF5bWVudFNjcmVlbnNob3QgJiYgcGF5bWVudFNjcmVlbnNob3Quc2l6ZSA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgcGF5bWVudCBzY3JlZW5zaG90IHVwbG9hZCwgZmlsZSBzaXplOicsIHBheW1lbnRTY3JlZW5zaG90LnNpemUpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIGZpbGUgdHlwZVxyXG4gICAgICAgIGlmICghcGF5bWVudFNjcmVlbnNob3QudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnUGF5bWVudCBzY3JlZW5zaG90IG11c3QgYmUgYW4gaW1hZ2UgZmlsZScgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSBmaWxlIHNpemUgKDVNQiBsaW1pdClcclxuICAgICAgICBpZiAocGF5bWVudFNjcmVlbnNob3Quc2l6ZSA+IDUgKiAxMDI0ICogMTAyNCkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnUGF5bWVudCBzY3JlZW5zaG90IG11c3QgYmUgbGVzcyB0aGFuIDVNQicgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBieXRlcyA9IGF3YWl0IHBheW1lbnRTY3JlZW5zaG90LmFycmF5QnVmZmVyKClcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShieXRlcylcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgdW5pcXVlIGZpbGVuYW1lIHdpdGggcHJvcGVyIGV4dGVuc2lvblxyXG4gICAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBwYXltZW50U2NyZWVuc2hvdC5uYW1lLnNwbGl0KCcuJykucG9wKCkgfHwgJ2pwZydcclxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBwYXltZW50XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyl9LiR7ZmlsZUV4dGVuc2lvbn1gXHJcbiAgICAgICAgY29uc3QgdXBsb2Fkc0RpciA9IGpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd1cGxvYWRzJylcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGpvaW4odXBsb2Fkc0RpciwgZmlsZW5hbWUpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRW5zdXJlIHVwbG9hZHMgZGlyZWN0b3J5IGV4aXN0c1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBta2Rpcih1cGxvYWRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZHMgZGlyZWN0b3J5IGVuc3VyZWQnKVxyXG4gICAgICAgIH0gY2F0Y2ggKG1rZGlyRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWRzIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0cyBvciBjcmVhdGVkJylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBidWZmZXIpXHJcbiAgICAgICAgc2NyZWVuc2hvdFBhdGggPSBgL3VwbG9hZHMvJHtmaWxlbmFtZX1gXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbnNob3Qgc2F2ZWQgc3VjY2Vzc2Z1bGx5OicsIHNjcmVlbnNob3RQYXRoKVxyXG4gICAgICB9IGNhdGNoIChmaWxlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGaWxlIHVwbG9hZCBlcnJvcjonLCBmaWxlRXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGxvYWQgcGF5bWVudCBzY3JlZW5zaG90LiBQbGVhc2UgdHJ5IGFnYWluLicgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB1c2VyXHJcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgdXNlciBpbiBkYXRhYmFzZScpXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIHBob25lLFxyXG4gICAgICAgIHRlbGVncmFtVXNlcm5hbWU6IHRlbGVncmFtVXNlcm5hbWUgfHwgbnVsbCxcclxuICAgICAgICB3aGF0c2FwcE51bWJlcjogd2hhdHNhcHBOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICBkZXBhcnRtZW50SWQsXHJcbiAgICAgICAgaXNBcHByb3ZlZDogZmFsc2UsXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uRmVlOiAhIXNjcmVlbnNob3RQYXRoLCAvLyBTZXQgdG8gdHJ1ZSBpZiBzY3JlZW5zaG90IHdhcyB1cGxvYWRlZFxyXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IHBheW1lbnRNZXRob2QgfHwgbnVsbCxcclxuICAgICAgICBwYXltZW50U2NyZWVuc2hvdDogc2NyZWVuc2hvdFBhdGgsXHJcbiAgICAgICAgcGF5bWVudEFwcHJvdmVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBpbmNsdWRlOiB7XHJcbiAgICAgICAgZGVwYXJ0bWVudDogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHVzZXIuaWQpXHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IHNjcmVlbnNob3RQYXRoIFxyXG4gICAgICAgID8gJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsISBZb3VyIHBheW1lbnQgc2NyZWVuc2hvdCBoYXMgYmVlbiB1cGxvYWRlZC4gUGxlYXNlIHdhaXQgZm9yIGFkbWluIGFwcHJvdmFsLidcclxuICAgICAgICA6ICdSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCEgUGxlYXNlIGNvbXBsZXRlIHlvdXIgcGF5bWVudCBhbmQgdXBsb2FkIHRoZSBzY3JlZW5zaG90LicsXHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgZGVwYXJ0bWVudDogdXNlci5kZXBhcnRtZW50Py5uYW1lLFxyXG4gICAgICAgIGlzQXBwcm92ZWQ6IHVzZXIuaXNBcHByb3ZlZCxcclxuICAgICAgICBwYXltZW50QXBwcm92ZWQ6IHVzZXIucGF5bWVudEFwcHJvdmVkLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbkZlZTogdXNlci5yZWdpc3RyYXRpb25GZWVcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZWdpc3RyYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICBcclxuICAgIC8vIE1vcmUgc3BlY2lmaWMgZXJyb3IgaGFuZGxpbmdcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmlxdWUgY29uc3RyYWludCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ1VzZXIgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRm9yZWlnbiBrZXkgY29uc3RyYWludCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogJ0ludmFsaWQgZGVwYXJ0bWVudCBzZWxlY3RlZCcgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgIClcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0VOT0VOVCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3Blcm1pc3Npb24nKSkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdGaWxlIHVwbG9hZCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ1JlZ2lzdHJhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYmNyeXB0IiwicHJpc21hIiwid3JpdGVGaWxlIiwibWtkaXIiLCJqb2luIiwiUE9TVCIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsInBheW1lbnRTY3JlZW5zaG90IiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwiZ2V0IiwiaW5jbHVkZXMiLCJmb3JtRGF0YSIsImVtYWlsIiwicGFzc3dvcmQiLCJuYW1lIiwicGhvbmUiLCJ0ZWxlZ3JhbVVzZXJuYW1lIiwid2hhdHNhcHBOdW1iZXIiLCJkZXBhcnRtZW50SWQiLCJwYXltZW50TWV0aG9kIiwidXNlclR5cGUiLCJoYXNTY3JlZW5zaG90IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiZXhpc3RpbmdBZG1pbiIsImFkbWluIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiY3JlYXRlIiwiZGF0YSIsImlkIiwibWVzc2FnZSIsImhhc1ZhbGlkVGVsZWdyYW0iLCJsZW5ndGgiLCJoYXNWYWxpZFdoYXRzQXBwIiwiZXhpc3RpbmdVc2VyIiwidXNlciIsImRlcGFydG1lbnQiLCJzY3JlZW5zaG90UGF0aCIsInNpemUiLCJ0eXBlIiwic3RhcnRzV2l0aCIsImJ5dGVzIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiZmlsZUV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwiZmlsZW5hbWUiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwidXBsb2Fkc0RpciIsInByb2Nlc3MiLCJjd2QiLCJmaWxlUGF0aCIsInJlY3Vyc2l2ZSIsIm1rZGlyRXJyb3IiLCJmaWxlRXJyb3IiLCJpc0FwcHJvdmVkIiwicmVnaXN0cmF0aW9uRmVlIiwicGF5bWVudEFwcHJvdmVkIiwiaW5jbHVkZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/register/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Fzc2lnbm1lbnQtcGxhdGZvcm0vLi9saWIvcHJpc21hLnRzPzk4MjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();