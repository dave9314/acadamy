"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/register/route";
exports.ids = ["app/api/auth/register/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Dawit_Desktop_assignmet_platform_app_api_auth_register_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/register/route.ts */ \"(rsc)/./app/api/auth/register/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/register/route\",\n        pathname: \"/api/auth/register\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/register/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Dawit\\\\Desktop\\\\assignmet platform\\\\app\\\\api\\\\auth\\\\register\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Dawit_Desktop_assignmet_platform_app_api_auth_register_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/register/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcmVnaXN0ZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNEYXdpdCU1Q0Rlc2t0b3AlNUNhc3NpZ25tZXQlMjBwbGF0Zm9ybSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDRGF3aXQlNUNEZXNrdG9wJTVDYXNzaWdubWV0JTIwcGxhdGZvcm0maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUM7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3NpZ25tZW50LXBsYXRmb3JtLz8wYzBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXERhd2l0XFxcXERlc2t0b3BcXFxcYXNzaWdubWV0IHBsYXRmb3JtXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxyZWdpc3RlclxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9yZWdpc3Rlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvcmVnaXN0ZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvcmVnaXN0ZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxEYXdpdFxcXFxEZXNrdG9wXFxcXGFzc2lnbm1ldCBwbGF0Zm9ybVxcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxccmVnaXN0ZXJcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9yZWdpc3Rlci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/register/route.ts":
/*!****************************************!*\
  !*** ./app/api/auth/register/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nasync function POST(request) {\n    try {\n        console.log(\"Registration request received\");\n        let body = {};\n        let paymentScreenshot = null;\n        // Check content type to determine how to parse the request\n        const contentType = request.headers.get(\"content-type\") || \"\";\n        if (contentType.includes(\"multipart/form-data\")) {\n            // Handle FormData (with file upload)\n            const formData = await request.formData();\n            // Extract all form fields\n            body = {\n                email: formData.get(\"email\"),\n                password: formData.get(\"password\"),\n                name: formData.get(\"name\"),\n                phone: formData.get(\"phone\"),\n                telegramUsername: formData.get(\"telegramUsername\"),\n                whatsappNumber: formData.get(\"whatsappNumber\"),\n                departmentId: formData.get(\"departmentId\"),\n                paymentMethod: formData.get(\"paymentMethod\"),\n                userType: formData.get(\"userType\") || \"user\"\n            };\n            paymentScreenshot = formData.get(\"paymentScreenshot\");\n            console.log(\"FormData parsed:\", {\n                ...body,\n                hasScreenshot: !!paymentScreenshot\n            });\n        } else {\n            // Handle JSON data\n            body = await request.json();\n            console.log(\"JSON data parsed:\", body);\n        }\n        const { email, password, name, phone, telegramUsername, whatsappNumber, departmentId, userType, paymentMethod } = body;\n        console.log(\"Processing registration for:\", email, \"Type:\", userType);\n        // Validate required fields\n        if (!email || !password) {\n            console.log(\"Missing email or password\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Email and password are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Admin registration\n        if (userType === \"admin\") {\n            console.log(\"Processing admin registration\");\n            const existingAdmin = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.admin.findUnique({\n                where: {\n                    email\n                }\n            });\n            if (existingAdmin) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Admin with this email already exists\"\n                }, {\n                    status: 400\n                });\n            }\n            const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 12);\n            const admin = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.admin.create({\n                data: {\n                    email,\n                    password: hashedPassword,\n                    name: name || \"Admin\"\n                }\n            });\n            console.log(\"Admin created successfully:\", admin.id);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"Admin registered successfully\",\n                admin: {\n                    id: admin.id,\n                    email: admin.email,\n                    name: admin.name\n                }\n            });\n        }\n        // User registration\n        console.log(\"Processing user registration\");\n        if (!name || !phone || !departmentId) {\n            console.log(\"Missing required user fields\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Name, phone, and department are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate contact methods\n        const hasValidTelegram = telegramUsername && telegramUsername.length >= 3;\n        const hasValidWhatsApp = whatsappNumber && whatsappNumber.length >= 8;\n        if (!hasValidTelegram && !hasValidWhatsApp) {\n            console.log(\"Invalid contact methods\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Either Telegram username (min 3 characters) or WhatsApp number (min 8 digits) is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if user already exists\n        const existingUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            console.log(\"User already exists\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"User with this email already exists\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify department exists\n        const department = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.department.findUnique({\n            where: {\n                id: departmentId\n            }\n        });\n        if (!department) {\n            console.log(\"Invalid department\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid department selected\"\n            }, {\n                status: 400\n            });\n        }\n        // Hash password\n        const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 12);\n        let screenshotPath = null;\n        // Handle file upload if present\n        if (paymentScreenshot && paymentScreenshot.size > 0) {\n            console.log(\"Processing payment screenshot upload\");\n            try {\n                const bytes = await paymentScreenshot.arrayBuffer();\n                const buffer = Buffer.from(bytes);\n                // Create unique filename\n                const filename = `payment_${Date.now()}_${paymentScreenshot.name.replace(/[^a-zA-Z0-9.-]/g, \"_\")}`;\n                const uploadsDir = (0,path__WEBPACK_IMPORTED_MODULE_4__.join)(process.cwd(), \"public\", \"uploads\");\n                const filePath = (0,path__WEBPACK_IMPORTED_MODULE_4__.join)(uploadsDir, filename);\n                // Ensure uploads directory exists\n                try {\n                    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir)(uploadsDir, {\n                        recursive: true\n                    });\n                } catch (error) {\n                // Directory might already exist\n                }\n                await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile)(filePath, buffer);\n                screenshotPath = `/uploads/${filename}`;\n                console.log(\"Screenshot saved:\", screenshotPath);\n            } catch (fileError) {\n                console.error(\"File upload error:\", fileError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Failed to upload payment screenshot\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // Create user\n        console.log(\"Creating user in database\");\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.create({\n            data: {\n                email,\n                password: hashedPassword,\n                name,\n                phone,\n                telegramUsername: telegramUsername || null,\n                whatsappNumber: whatsappNumber || null,\n                departmentId,\n                isApproved: false,\n                registrationFee: false,\n                paymentMethod: paymentMethod || null,\n                paymentScreenshot: screenshotPath,\n                paymentApproved: false\n            },\n            include: {\n                department: true\n            }\n        });\n        console.log(\"User created successfully:\", user.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: paymentScreenshot ? \"Registration successful! Please wait for admin approval of your payment and account.\" : \"User registered successfully. Please wait for admin approval.\",\n            user: {\n                id: user.id,\n                email: user.email,\n                name: user.name,\n                department: user.department?.name,\n                isApproved: user.isApproved,\n                paymentApproved: user.paymentApproved\n            }\n        });\n    } catch (error) {\n        console.error(\"Registration error:\", error);\n        // More specific error handling\n        if (error instanceof Error) {\n            if (error.message.includes(\"Unique constraint\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"User with this email already exists\"\n                }, {\n                    status: 400\n                });\n            }\n            if (error.message.includes(\"Foreign key constraint\")) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Invalid department selected\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Registration failed. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvcmVnaXN0ZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQzFCO0FBQ1E7QUFDUztBQUNuQjtBQUVwQixlQUFlTSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLElBQUlDLE9BQVksQ0FBQztRQUNqQixJQUFJQyxvQkFBaUM7UUFFckMsMkRBQTJEO1FBQzNELE1BQU1DLGNBQWNMLFFBQVFNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQjtRQUUzRCxJQUFJRixZQUFZRyxRQUFRLENBQUMsd0JBQXdCO1lBQy9DLHFDQUFxQztZQUNyQyxNQUFNQyxXQUFXLE1BQU1ULFFBQVFTLFFBQVE7WUFFdkMsMEJBQTBCO1lBQzFCTixPQUFPO2dCQUNMTyxPQUFPRCxTQUFTRixHQUFHLENBQUM7Z0JBQ3BCSSxVQUFVRixTQUFTRixHQUFHLENBQUM7Z0JBQ3ZCSyxNQUFNSCxTQUFTRixHQUFHLENBQUM7Z0JBQ25CTSxPQUFPSixTQUFTRixHQUFHLENBQUM7Z0JBQ3BCTyxrQkFBa0JMLFNBQVNGLEdBQUcsQ0FBQztnQkFDL0JRLGdCQUFnQk4sU0FBU0YsR0FBRyxDQUFDO2dCQUM3QlMsY0FBY1AsU0FBU0YsR0FBRyxDQUFDO2dCQUMzQlUsZUFBZVIsU0FBU0YsR0FBRyxDQUFDO2dCQUM1QlcsVUFBVVQsU0FBU0YsR0FBRyxDQUFDLGVBQXlCO1lBQ2xEO1lBRUFILG9CQUFvQkssU0FBU0YsR0FBRyxDQUFDO1lBQ2pDTixRQUFRQyxHQUFHLENBQUMsb0JBQW9CO2dCQUFFLEdBQUdDLElBQUk7Z0JBQUVnQixlQUFlLENBQUMsQ0FBQ2Y7WUFBa0I7UUFDaEYsT0FBTztZQUNMLG1CQUFtQjtZQUNuQkQsT0FBTyxNQUFNSCxRQUFRb0IsSUFBSTtZQUN6Qm5CLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJDO1FBQ25DO1FBRUEsTUFBTSxFQUNKTyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsSUFBSSxFQUNKQyxLQUFLLEVBQ0xDLGdCQUFnQixFQUNoQkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1pFLFFBQVEsRUFDUkQsYUFBYSxFQUNkLEdBQUdkO1FBRUpGLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NRLE9BQU8sU0FBU1E7UUFFNUQsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ1IsU0FBUyxDQUFDQyxVQUFVO1lBQ3ZCVixRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPVCxrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBa0MsR0FDM0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHFCQUFxQjtRQUNyQixJQUFJSixhQUFhLFNBQVM7WUFDeEJqQixRQUFRQyxHQUFHLENBQUM7WUFFWixNQUFNcUIsZ0JBQWdCLE1BQU01QiwrQ0FBTUEsQ0FBQzZCLEtBQUssQ0FBQ0MsVUFBVSxDQUFDO2dCQUNsREMsT0FBTztvQkFBRWhCO2dCQUFNO1lBQ2pCO1lBRUEsSUFBSWEsZUFBZTtnQkFDakIsT0FBTzlCLGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBdUMsR0FDaEQ7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxNQUFNSyxpQkFBaUIsTUFBTWpDLG9EQUFXLENBQUNpQixVQUFVO1lBRW5ELE1BQU1hLFFBQVEsTUFBTTdCLCtDQUFNQSxDQUFDNkIsS0FBSyxDQUFDSyxNQUFNLENBQUM7Z0JBQ3RDQyxNQUFNO29CQUNKcEI7b0JBQ0FDLFVBQVVnQjtvQkFDVmYsTUFBTUEsUUFBUTtnQkFDaEI7WUFDRjtZQUVBWCxRQUFRQyxHQUFHLENBQUMsK0JBQStCc0IsTUFBTU8sRUFBRTtZQUNuRCxPQUFPdEMsa0ZBQVlBLENBQUMyQixJQUFJLENBQUM7Z0JBQ3ZCWSxTQUFTO2dCQUNUUixPQUFPO29CQUNMTyxJQUFJUCxNQUFNTyxFQUFFO29CQUNackIsT0FBT2MsTUFBTWQsS0FBSztvQkFDbEJFLE1BQU1ZLE1BQU1aLElBQUk7Z0JBQ2xCO1lBQ0Y7UUFDRjtRQUVBLG9CQUFvQjtRQUNwQlgsUUFBUUMsR0FBRyxDQUFDO1FBRVosSUFBSSxDQUFDVSxRQUFRLENBQUNDLFNBQVMsQ0FBQ0csY0FBYztZQUNwQ2YsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT1Qsa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQTJDLEdBQ3BEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTVcsbUJBQW1CbkIsb0JBQW9CQSxpQkFBaUJvQixNQUFNLElBQUk7UUFDeEUsTUFBTUMsbUJBQW1CcEIsa0JBQWtCQSxlQUFlbUIsTUFBTSxJQUFJO1FBRXBFLElBQUksQ0FBQ0Qsb0JBQW9CLENBQUNFLGtCQUFrQjtZQUMxQ2xDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9ULGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE0RixHQUNyRztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsK0JBQStCO1FBQy9CLE1BQU1jLGVBQWUsTUFBTXpDLCtDQUFNQSxDQUFDMEMsSUFBSSxDQUFDWixVQUFVLENBQUM7WUFDaERDLE9BQU87Z0JBQUVoQjtZQUFNO1FBQ2pCO1FBRUEsSUFBSTBCLGNBQWM7WUFDaEJuQyxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPVCxrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBc0MsR0FDL0M7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNZ0IsYUFBYSxNQUFNM0MsK0NBQU1BLENBQUMyQyxVQUFVLENBQUNiLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRUssSUFBSWY7WUFBYTtRQUM1QjtRQUVBLElBQUksQ0FBQ3NCLFlBQVk7WUFDZnJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9ULGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE4QixHQUN2QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsZ0JBQWdCO1FBQ2hCLE1BQU1LLGlCQUFpQixNQUFNakMsb0RBQVcsQ0FBQ2lCLFVBQVU7UUFFbkQsSUFBSTRCLGlCQUFpQjtRQUVyQixnQ0FBZ0M7UUFDaEMsSUFBSW5DLHFCQUFxQkEsa0JBQWtCb0MsSUFBSSxHQUFHLEdBQUc7WUFDbkR2QyxRQUFRQyxHQUFHLENBQUM7WUFFWixJQUFJO2dCQUNGLE1BQU11QyxRQUFRLE1BQU1yQyxrQkFBa0JzQyxXQUFXO2dCQUNqRCxNQUFNQyxTQUFTQyxPQUFPQyxJQUFJLENBQUNKO2dCQUUzQix5QkFBeUI7Z0JBQ3pCLE1BQU1LLFdBQVcsQ0FBQyxRQUFRLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDLEVBQUU1QyxrQkFBa0JRLElBQUksQ0FBQ3FDLE9BQU8sQ0FBQyxtQkFBbUIsS0FBSyxDQUFDO2dCQUNsRyxNQUFNQyxhQUFhcEQsMENBQUlBLENBQUNxRCxRQUFRQyxHQUFHLElBQUksVUFBVTtnQkFDakQsTUFBTUMsV0FBV3ZELDBDQUFJQSxDQUFDb0QsWUFBWUo7Z0JBRWxDLGtDQUFrQztnQkFDbEMsSUFBSTtvQkFDRixNQUFNakQsa0RBQUtBLENBQUNxRCxZQUFZO3dCQUFFSSxXQUFXO29CQUFLO2dCQUM1QyxFQUFFLE9BQU9qQyxPQUFPO2dCQUNkLGdDQUFnQztnQkFDbEM7Z0JBRUEsTUFBTXpCLHNEQUFTQSxDQUFDeUQsVUFBVVY7Z0JBQzFCSixpQkFBaUIsQ0FBQyxTQUFTLEVBQUVPLFNBQVMsQ0FBQztnQkFDdkM3QyxRQUFRQyxHQUFHLENBQUMscUJBQXFCcUM7WUFDbkMsRUFBRSxPQUFPZ0IsV0FBVztnQkFDbEJ0RCxRQUFRb0IsS0FBSyxDQUFDLHNCQUFzQmtDO2dCQUNwQyxPQUFPOUQsa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO29CQUFFQyxPQUFPO2dCQUFzQyxHQUMvQztvQkFBRUMsUUFBUTtnQkFBSTtZQUVsQjtRQUNGO1FBRUEsY0FBYztRQUNkckIsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTW1DLE9BQU8sTUFBTTFDLCtDQUFNQSxDQUFDMEMsSUFBSSxDQUFDUixNQUFNLENBQUM7WUFDcENDLE1BQU07Z0JBQ0pwQjtnQkFDQUMsVUFBVWdCO2dCQUNWZjtnQkFDQUM7Z0JBQ0FDLGtCQUFrQkEsb0JBQW9CO2dCQUN0Q0MsZ0JBQWdCQSxrQkFBa0I7Z0JBQ2xDQztnQkFDQXdDLFlBQVk7Z0JBQ1pDLGlCQUFpQjtnQkFDakJ4QyxlQUFlQSxpQkFBaUI7Z0JBQ2hDYixtQkFBbUJtQztnQkFDbkJtQixpQkFBaUI7WUFDbkI7WUFDQUMsU0FBUztnQkFDUHJCLFlBQVk7WUFDZDtRQUNGO1FBRUFyQyxRQUFRQyxHQUFHLENBQUMsOEJBQThCbUMsS0FBS04sRUFBRTtRQUVqRCxPQUFPdEMsa0ZBQVlBLENBQUMyQixJQUFJLENBQUM7WUFDdkJZLFNBQVM1QixvQkFDTCx5RkFDQTtZQUNKaUMsTUFBTTtnQkFDSk4sSUFBSU0sS0FBS04sRUFBRTtnQkFDWHJCLE9BQU8yQixLQUFLM0IsS0FBSztnQkFDakJFLE1BQU15QixLQUFLekIsSUFBSTtnQkFDZjBCLFlBQVlELEtBQUtDLFVBQVUsRUFBRTFCO2dCQUM3QjRDLFlBQVluQixLQUFLbUIsVUFBVTtnQkFDM0JFLGlCQUFpQnJCLEtBQUtxQixlQUFlO1lBQ3ZDO1FBQ0Y7SUFFRixFQUFFLE9BQU9yQyxPQUFPO1FBQ2RwQixRQUFRb0IsS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsK0JBQStCO1FBQy9CLElBQUlBLGlCQUFpQnVDLE9BQU87WUFDMUIsSUFBSXZDLE1BQU1XLE9BQU8sQ0FBQ3hCLFFBQVEsQ0FBQyxzQkFBc0I7Z0JBQy9DLE9BQU9mLGtGQUFZQSxDQUFDMkIsSUFBSSxDQUN0QjtvQkFBRUMsT0FBTztnQkFBc0MsR0FDL0M7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxJQUFJRCxNQUFNVyxPQUFPLENBQUN4QixRQUFRLENBQUMsMkJBQTJCO2dCQUNwRCxPQUFPZixrRkFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQThCLEdBQ3ZDO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0Y7UUFFQSxPQUFPN0Isa0ZBQVlBLENBQUMyQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBeUMsR0FDbEQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3NpZ25tZW50LXBsYXRmb3JtLy4vYXBwL2FwaS9hdXRoL3JlZ2lzdGVyL3JvdXRlLnRzPzRhOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXHJcbmltcG9ydCB7IHdyaXRlRmlsZSwgbWtkaXIgfSBmcm9tICdmcy9wcm9taXNlcydcclxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIHJlcXVlc3QgcmVjZWl2ZWQnKVxyXG4gICAgXHJcbiAgICBsZXQgYm9keTogYW55ID0ge31cclxuICAgIGxldCBwYXltZW50U2NyZWVuc2hvdDogRmlsZSB8IG51bGwgPSBudWxsXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGNvbnRlbnQgdHlwZSB0byBkZXRlcm1pbmUgaG93IHRvIHBhcnNlIHRoZSByZXF1ZXN0XHJcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpIHx8ICcnXHJcbiAgICBcclxuICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcygnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpKSB7XHJcbiAgICAgIC8vIEhhbmRsZSBGb3JtRGF0YSAod2l0aCBmaWxlIHVwbG9hZClcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcclxuICAgICAgXHJcbiAgICAgIC8vIEV4dHJhY3QgYWxsIGZvcm0gZmllbGRzXHJcbiAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgZW1haWw6IGZvcm1EYXRhLmdldCgnZW1haWwnKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgcGFzc3dvcmQ6IGZvcm1EYXRhLmdldCgncGFzc3dvcmQnKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgbmFtZTogZm9ybURhdGEuZ2V0KCduYW1lJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHBob25lOiBmb3JtRGF0YS5nZXQoJ3Bob25lJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHRlbGVncmFtVXNlcm5hbWU6IGZvcm1EYXRhLmdldCgndGVsZWdyYW1Vc2VybmFtZScpIGFzIHN0cmluZyxcclxuICAgICAgICB3aGF0c2FwcE51bWJlcjogZm9ybURhdGEuZ2V0KCd3aGF0c2FwcE51bWJlcicpIGFzIHN0cmluZyxcclxuICAgICAgICBkZXBhcnRtZW50SWQ6IGZvcm1EYXRhLmdldCgnZGVwYXJ0bWVudElkJykgYXMgc3RyaW5nLFxyXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IGZvcm1EYXRhLmdldCgncGF5bWVudE1ldGhvZCcpIGFzIHN0cmluZyxcclxuICAgICAgICB1c2VyVHlwZTogZm9ybURhdGEuZ2V0KCd1c2VyVHlwZScpIGFzIHN0cmluZyB8fCAndXNlcidcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcGF5bWVudFNjcmVlbnNob3QgPSBmb3JtRGF0YS5nZXQoJ3BheW1lbnRTY3JlZW5zaG90JykgYXMgRmlsZSB8IG51bGxcclxuICAgICAgY29uc29sZS5sb2coJ0Zvcm1EYXRhIHBhcnNlZDonLCB7IC4uLmJvZHksIGhhc1NjcmVlbnNob3Q6ICEhcGF5bWVudFNjcmVlbnNob3QgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEhhbmRsZSBKU09OIGRhdGFcclxuICAgICAgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdKU09OIGRhdGEgcGFyc2VkOicsIGJvZHkpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgXHJcbiAgICAgIGVtYWlsLCBcclxuICAgICAgcGFzc3dvcmQsIFxyXG4gICAgICBuYW1lLCBcclxuICAgICAgcGhvbmUsIFxyXG4gICAgICB0ZWxlZ3JhbVVzZXJuYW1lLCBcclxuICAgICAgd2hhdHNhcHBOdW1iZXIsIFxyXG4gICAgICBkZXBhcnRtZW50SWQsIFxyXG4gICAgICB1c2VyVHlwZSxcclxuICAgICAgcGF5bWVudE1ldGhvZFxyXG4gICAgfSA9IGJvZHlcclxuXHJcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyByZWdpc3RyYXRpb24gZm9yOicsIGVtYWlsLCAnVHlwZTonLCB1c2VyVHlwZSlcclxuXHJcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcclxuICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdNaXNzaW5nIGVtYWlsIG9yIHBhc3N3b3JkJylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWRtaW4gcmVnaXN0cmF0aW9uXHJcbiAgICBpZiAodXNlclR5cGUgPT09ICdhZG1pbicpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgYWRtaW4gcmVnaXN0cmF0aW9uJylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nQWRtaW4gPSBhd2FpdCBwcmlzbWEuYWRtaW4uZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgZW1haWwgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nQWRtaW4pIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnQWRtaW4gd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMilcclxuXHJcbiAgICAgIGNvbnN0IGFkbWluID0gYXdhaXQgcHJpc21hLmFkbWluLmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgICBuYW1lOiBuYW1lIHx8ICdBZG1pbidcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQWRtaW4gY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgYWRtaW4uaWQpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogJ0FkbWluIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgICAgICBhZG1pbjoge1xyXG4gICAgICAgICAgaWQ6IGFkbWluLmlkLFxyXG4gICAgICAgICAgZW1haWw6IGFkbWluLmVtYWlsLFxyXG4gICAgICAgICAgbmFtZTogYWRtaW4ubmFtZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0gXHJcbiAgICBcclxuICAgIC8vIFVzZXIgcmVnaXN0cmF0aW9uXHJcbiAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyB1c2VyIHJlZ2lzdHJhdGlvbicpXHJcbiAgICBcclxuICAgIGlmICghbmFtZSB8fCAhcGhvbmUgfHwgIWRlcGFydG1lbnRJZCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTWlzc2luZyByZXF1aXJlZCB1c2VyIGZpZWxkcycpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTmFtZSwgcGhvbmUsIGFuZCBkZXBhcnRtZW50IGFyZSByZXF1aXJlZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFZhbGlkYXRlIGNvbnRhY3QgbWV0aG9kc1xyXG4gICAgY29uc3QgaGFzVmFsaWRUZWxlZ3JhbSA9IHRlbGVncmFtVXNlcm5hbWUgJiYgdGVsZWdyYW1Vc2VybmFtZS5sZW5ndGggPj0gM1xyXG4gICAgY29uc3QgaGFzVmFsaWRXaGF0c0FwcCA9IHdoYXRzYXBwTnVtYmVyICYmIHdoYXRzYXBwTnVtYmVyLmxlbmd0aCA+PSA4XHJcbiAgICBcclxuICAgIGlmICghaGFzVmFsaWRUZWxlZ3JhbSAmJiAhaGFzVmFsaWRXaGF0c0FwcCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBjb250YWN0IG1ldGhvZHMnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0VpdGhlciBUZWxlZ3JhbSB1c2VybmFtZSAobWluIDMgY2hhcmFjdGVycykgb3IgV2hhdHNBcHAgbnVtYmVyIChtaW4gOCBkaWdpdHMpIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGV4aXN0c1xyXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgIHdoZXJlOiB7IGVtYWlsIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlciBhbHJlYWR5IGV4aXN0cycpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgZGVwYXJ0bWVudCBleGlzdHNcclxuICAgIGNvbnN0IGRlcGFydG1lbnQgPSBhd2FpdCBwcmlzbWEuZGVwYXJ0bWVudC5maW5kVW5pcXVlKHtcclxuICAgICAgd2hlcmU6IHsgaWQ6IGRlcGFydG1lbnRJZCB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghZGVwYXJ0bWVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBkZXBhcnRtZW50JylcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGRlcGFydG1lbnQgc2VsZWN0ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYXNoIHBhc3N3b3JkXHJcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMilcclxuXHJcbiAgICBsZXQgc2NyZWVuc2hvdFBhdGggPSBudWxsXHJcbiAgICBcclxuICAgIC8vIEhhbmRsZSBmaWxlIHVwbG9hZCBpZiBwcmVzZW50XHJcbiAgICBpZiAocGF5bWVudFNjcmVlbnNob3QgJiYgcGF5bWVudFNjcmVlbnNob3Quc2l6ZSA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgcGF5bWVudCBzY3JlZW5zaG90IHVwbG9hZCcpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgcGF5bWVudFNjcmVlbnNob3QuYXJyYXlCdWZmZXIoKVxyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSB1bmlxdWUgZmlsZW5hbWVcclxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBwYXltZW50XyR7RGF0ZS5ub3coKX1fJHtwYXltZW50U2NyZWVuc2hvdC5uYW1lLnJlcGxhY2UoL1teYS16QS1aMC05Li1dL2csICdfJyl9YFxyXG4gICAgICAgIGNvbnN0IHVwbG9hZHNEaXIgPSBqb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAndXBsb2FkcycpXHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBqb2luKHVwbG9hZHNEaXIsIGZpbGVuYW1lKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEVuc3VyZSB1cGxvYWRzIGRpcmVjdG9yeSBleGlzdHNcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgbWtkaXIodXBsb2Fkc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgLy8gRGlyZWN0b3J5IG1pZ2h0IGFscmVhZHkgZXhpc3RcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBidWZmZXIpXHJcbiAgICAgICAgc2NyZWVuc2hvdFBhdGggPSBgL3VwbG9hZHMvJHtmaWxlbmFtZX1gXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NjcmVlbnNob3Qgc2F2ZWQ6Jywgc2NyZWVuc2hvdFBhdGgpXHJcbiAgICAgIH0gY2F0Y2ggKGZpbGVFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGUgdXBsb2FkIGVycm9yOicsIGZpbGVFcnJvcilcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVwbG9hZCBwYXltZW50IHNjcmVlbnNob3QnIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgdXNlclxyXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHVzZXIgaW4gZGF0YWJhc2UnKVxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBwaG9uZSxcclxuICAgICAgICB0ZWxlZ3JhbVVzZXJuYW1lOiB0ZWxlZ3JhbVVzZXJuYW1lIHx8IG51bGwsXHJcbiAgICAgICAgd2hhdHNhcHBOdW1iZXI6IHdoYXRzYXBwTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgZGVwYXJ0bWVudElkLFxyXG4gICAgICAgIGlzQXBwcm92ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbkZlZTogZmFsc2UsXHJcbiAgICAgICAgcGF5bWVudE1ldGhvZDogcGF5bWVudE1ldGhvZCB8fCBudWxsLFxyXG4gICAgICAgIHBheW1lbnRTY3JlZW5zaG90OiBzY3JlZW5zaG90UGF0aCxcclxuICAgICAgICBwYXltZW50QXBwcm92ZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICBkZXBhcnRtZW50OiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc29sZS5sb2coJ1VzZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgdXNlci5pZClcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogcGF5bWVudFNjcmVlbnNob3QgXHJcbiAgICAgICAgPyAnUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwhIFBsZWFzZSB3YWl0IGZvciBhZG1pbiBhcHByb3ZhbCBvZiB5b3VyIHBheW1lbnQgYW5kIGFjY291bnQuJ1xyXG4gICAgICAgIDogJ1VzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHkuIFBsZWFzZSB3YWl0IGZvciBhZG1pbiBhcHByb3ZhbC4nLFxyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICAgIGRlcGFydG1lbnQ6IHVzZXIuZGVwYXJ0bWVudD8ubmFtZSxcclxuICAgICAgICBpc0FwcHJvdmVkOiB1c2VyLmlzQXBwcm92ZWQsXHJcbiAgICAgICAgcGF5bWVudEFwcHJvdmVkOiB1c2VyLnBheW1lbnRBcHByb3ZlZFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1JlZ2lzdHJhdGlvbiBlcnJvcjonLCBlcnJvcilcclxuICAgIFxyXG4gICAgLy8gTW9yZSBzcGVjaWZpYyBlcnJvciBoYW5kbGluZ1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1VuaXF1ZSBjb25zdHJhaW50JykpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnVXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdGb3JlaWduIGtleSBjb25zdHJhaW50JykpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBkZXBhcnRtZW50IHNlbGVjdGVkJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ1JlZ2lzdHJhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYmNyeXB0IiwicHJpc21hIiwid3JpdGVGaWxlIiwibWtkaXIiLCJqb2luIiwiUE9TVCIsInJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsInBheW1lbnRTY3JlZW5zaG90IiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwiZ2V0IiwiaW5jbHVkZXMiLCJmb3JtRGF0YSIsImVtYWlsIiwicGFzc3dvcmQiLCJuYW1lIiwicGhvbmUiLCJ0ZWxlZ3JhbVVzZXJuYW1lIiwid2hhdHNhcHBOdW1iZXIiLCJkZXBhcnRtZW50SWQiLCJwYXltZW50TWV0aG9kIiwidXNlclR5cGUiLCJoYXNTY3JlZW5zaG90IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiZXhpc3RpbmdBZG1pbiIsImFkbWluIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwiY3JlYXRlIiwiZGF0YSIsImlkIiwibWVzc2FnZSIsImhhc1ZhbGlkVGVsZWdyYW0iLCJsZW5ndGgiLCJoYXNWYWxpZFdoYXRzQXBwIiwiZXhpc3RpbmdVc2VyIiwidXNlciIsImRlcGFydG1lbnQiLCJzY3JlZW5zaG90UGF0aCIsInNpemUiLCJieXRlcyIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInJlcGxhY2UiLCJ1cGxvYWRzRGlyIiwicHJvY2VzcyIsImN3ZCIsImZpbGVQYXRoIiwicmVjdXJzaXZlIiwiZmlsZUVycm9yIiwiaXNBcHByb3ZlZCIsInJlZ2lzdHJhdGlvbkZlZSIsInBheW1lbnRBcHByb3ZlZCIsImluY2x1ZGUiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/register/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = globalThis.__prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalThis.__prisma = prisma;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQU03QyxNQUFNQyxTQUFTQyxXQUFXQyxRQUFRLElBQUksSUFBSUgsd0RBQVlBO0FBRXRELElBQUlJLElBQXlCLEVBQWM7SUFDekNGLFdBQVdDLFFBQVEsR0FBR0Y7QUFDeEI7QUFFaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3NpZ25tZW50LXBsYXRmb3JtLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIHZhciBfX3ByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmNvbnN0IHByaXNtYSA9IGdsb2JhbFRoaXMuX19wcmlzbWEgfHwgbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGdsb2JhbFRoaXMuX19wcmlzbWEgPSBwcmlzbWFcbn1cblxuZXhwb3J0IHsgcHJpc21hIH0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwiZ2xvYmFsVGhpcyIsIl9fcHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fregister%2Froute&page=%2Fapi%2Fauth%2Fregister%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fregister%2Froute.ts&appDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDawit%5CDesktop%5Cassignmet%20platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();